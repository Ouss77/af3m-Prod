(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{8538:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/JetCommunication/communications",function(){return s(7111)}])},7111:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(4848),l=s(3368),r=s.n(l),n=s(6540),c=s(6456),o=s(3981);function i(){let{language:e}=(0,n.useContext)(c.s),t="Articles Page",s="Description of the articles page",[l,i]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),[x,h]=(0,n.useState)("All"),[p,u]=(0,n.useState)({id:null,name:""}),[g,f]=(0,n.useState)(!0),[j,b]=(0,n.useState)(null),[y,w]=(0,n.useState)(""),[N,v]=(0,n.useState)({key:null,direction:"asc"}),[S,_]=(0,n.useState)({});(0,n.useEffect)(()=>{(0,o.qq)(i,m,f)},[]);let C=async(e,t)=>{try{let s=await fetch("".concat("http://localhost/AF3M-Backend","/getTheme.php?themeID=").concat(e)),a=await s.json();console.log("Fetched Theme Data:",a),u({id:e,article_id:t,name:a.themeName})}catch(t){u({id:e,name:"Theme not found"})}},k=()=>{u({id:null,name:""})},A=e=>{_(t=>({...t,[e]:!t[e]}))},E=e=>e.split(RegExp("(?<=[.!?])\\s*"))[0]||e,T=[...new Set(l.map(e=>e.annee))].sort((e,t)=>t-e);return g?(0,a.jsx)("div",{className:"text-center py-10",children:"Loading..."}):j?(0,a.jsxs)("div",{className:"text-center text-red-600 py-10",children:["Error: ",j]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("meta",{name:"description",content:s}),(0,a.jsx)("meta",{name:"robots",content:"index, follow"}),(0,a.jsx)("meta",{property:"og:title",content:t}),(0,a.jsx)("meta",{property:"og:description",content:s}),(0,a.jsx)("meta",{property:"og:url",content:"https://af3m-assoc.org/devenir-membre"}),(0,a.jsx)("meta",{property:"og:type",content:"website"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"https://af3m-assoc.org/wp-content/uploads/2022/10/Capture-de%CC%81cran-2022-10-06-a%CC%80-10.09.14.png"})]}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Articles"}),(0,a.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,a.jsxs)("select",{value:x,onChange:e=>(0,o.Sp)(e,h,m,l),className:"px-4 py-2 mr-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"All",children:"fr"==e?"Toutes les annees":"All Years"}),T.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",placeholder:"fr"==e?"Rechercher par titre ou nom de l'auteur":"Search by Title or Author Name",value:y,onChange:e=>(0,o.RX)(e,l,w,m),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("a",{href:"/JetCommunication/articlesList",className:"bg-blue-500 text-white text-center w-40 px-4 py-2 rounded-lg ml-2 hover:bg-green-500",children:"fr"===e?"Voir la liste":"View List"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-lg table-fixed",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-blue-800 text-white",children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer w-[80px]",onClick:()=>(0,o.VB)("annee",N,v,d,m),children:"Annee"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer hidden sm:table-cell",onClick:()=>(0,o.VB)("theme",N,v,d,m),children:"Theme"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase",children:"Titre"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase w-96 lg:w-[800px]",children:"Resume"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase w-[200px] hidden sm:table-cell",children:"Authors"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase w-[100px]",children:"PDF"})]})}),(0,a.jsxs)("tbody",{children:[d.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t border-gray-200 ".concat(t%2==0?"bg-gray-50":"bg-white"),children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.annee}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700 hidden sm:table-cell relative cursor-pointer",onMouseEnter:()=>C(e.theme,e.article_id),onMouseLeave:k,children:[e.theme,p.id===e.theme&&p.article_id===e.article_id&&(0,a.jsx)("div",{className:"absolute bg-blue-100 font-bold p-2 border text-xs w-32 -left-5  border-gray-300 shadow-lg rounded-lg z-10",children:p.name})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.titre}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-left text-gray-700",children:[(0,a.jsx)("div",{className:"sm:hidden w-44 lg:w-[800px]",children:E(e.resume)}),(0,a.jsxs)("div",{className:"hidden sm:block",children:[S[t]?e.resume:e.resume.split("\n").slice(0,3).join("\n"),e.resume.split("\n").length>3&&(0,a.jsx)("button",{"aria-label":"Read More",onClick:()=>A(t),className:"text-blue-500 hover:underline text-sm mt-2",children:S[t]?"Read Less":"...Read More"})]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 hidden sm:table-cell",children:e.authors}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:(0,a.jsx)("a",{href:"".concat("http://localhost/AF3M-Backend","/pdf_files/").concat(e.pdf_files),target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)("button",{className:"border-2 p-2 bg-green-500 rounded-lg font-bold hover:bg-green-600",children:"Download"})})})]},t)),0===d.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"No articles found."})})]})]})})]})]})}},3981:(e,t,s)=>{"use strict";s.d(t,{RX:()=>a,Sp:()=>l,VB:()=>n,qq:()=>r});let a=(e,t,s,a)=>{let l=e.target.value;s(l),a(t.filter(e=>e.titre.toLowerCase().includes(l.toLowerCase())||e.authors.toLowerCase().includes(l.toLowerCase())))},l=(e,t,s,a)=>{let l=e.target.value;t(l),s("All"===l?a:a.filter(e=>e.annee.toString()===l))},r=async(e,t,s)=>{let a=localStorage.getItem("cachedArticles"),l=localStorage.getItem("cachedTimestamp");if(a&&l&&Date.now()-l<36e5){e(JSON.parse(a)),t(JSON.parse(a)),s(!1);return}try{let s=await fetch("".concat("http://localhost/AF3M-Backend","/getArticles_locally.php"));if(!s.ok)throw Error("Failed to fetch articles");let a=await s.json();e(a),t(a),localStorage.setItem("cachedArticles",JSON.stringify(a)),localStorage.setItem("cachedTimestamp",Date.now())}catch(e){setError(e.message)}finally{s(!1)}},n=(e,t,s,a,l)=>{let r="asc"===t.direction?"desc":"asc";s({key:e,direction:r}),l([...a].sort((t,s)=>t[e]<s[e]?"asc"===r?-1:1:t[e]>s[e]?"asc"===r?1:-1:0))}},3368:(e,t,s)=>{e.exports=s(6085)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8538)),_N_E=e.O()}]);