(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{6518:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin_pages/modifierArticle",function(){return s(1660)}])},1660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(4848),a=s(6887),l=s(6540),c=s(3981);function d(){let[e,t]=(0,l.useState)([]),[s,d]=(0,l.useState)([]),[i,n]=(0,l.useState)(!0),[o,x]=(0,l.useState)(null),[m,h]=(0,l.useState)(""),[u,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{(0,c.qq)(t,d,n)},[]);let g=async e=>{try{if(!(await fetch("".concat("http://localhost/AF3M-Backend","/deleteArticles.php?article_id=").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete article");alert("Article deleted successfully"),window.location.reload()}catch(e){x(e.message)}};return i?(0,r.jsx)("div",{className:"text-center py-10",children:(0,r.jsx)(a.A,{})}):o?(0,r.jsxs)("div",{className:"text-center text-red-600 py-10",children:["Error: ",o]}):(0,r.jsxs)("div",{className:"mx-auto min-w-full px-4 py-10 ml-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Articles"}),(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by Title or Author Name",value:m,onChange:t=>(0,c.RX)(t,e,h,d),className:"search-bar w-3/4 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{"aria-label":"Add Article",onClick:()=>window.location.href="/admin_pages/ajouterArticle",className:"ml-4 px-6 py-2 bg-blue-600 text-white rounded-lg focus:outline-none hover:bg-blue-700",children:"Ajouter Article"})]}),(0,r.jsx)("div",{className:"overflow-x-auto min-w-full table-container hidden md:block",children:(0,r.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-lg",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-800 text-white",children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase border-r",children:"Annee"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase border-r",children:"Theme"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase border-r",children:"Titre"}),(0,r.jsx)("th",{className:"px-4 py-0 text-left text-sm font-medium uppercase border-r",children:"Resume"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase border-r",children:"Authors"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase",children:"Actions"})]})}),(0,r.jsxs)("tbody",{children:[s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t border-gray-200 ".concat(t%2==0?"bg-gray-50":"bg-white"),children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.annee}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.theme}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.titre}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.resume}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r",children:e.authors}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:(0,r.jsx)("button",{"aria-label":"Edit Article",onClick:()=>g(e.article_id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})})]},e.id)),0===s.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"No articles found."})})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:[s.map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"font-bold text-lg",children:e.titre}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Annee: ",e.annee]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Theme: ",e.theme]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Authors: ",e.authors]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:()=>p(u===e.id?null:e.id),children:u===e.id?"Hide Resume":"Show Resume"}),u===e.id&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:e.resume})]}),(0,r.jsx)("button",{"aria-label":"Delete Article",onClick:()=>g(e.article_id),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]},e.id)),0===s.length&&(0,r.jsx)("div",{className:"col-span-full text-center py-4 text-gray-500",children:"No articles found."})]})]})}},3981:(e,t,s)=>{"use strict";s.d(t,{RX:()=>r,Sp:()=>a,VB:()=>c,qq:()=>l});let r=(e,t,s,r)=>{let a=e.target.value;s(a),r(t.filter(e=>e.titre.toLowerCase().includes(a.toLowerCase())||e.authors.toLowerCase().includes(a.toLowerCase())))},a=(e,t,s,r)=>{let a=e.target.value;t(a),s("All"===a?r:r.filter(e=>e.annee.toString()===a))},l=async(e,t,s)=>{let r=localStorage.getItem("cachedArticles"),a=localStorage.getItem("cachedTimestamp");if(r&&a&&Date.now()-a<36e5){e(JSON.parse(r)),t(JSON.parse(r)),s(!1);return}try{let s=await fetch("".concat("http://localhost/AF3M-Backend","/getArticles_locally.php"));if(!s.ok)throw Error("Failed to fetch articles");let r=await s.json();e(r),t(r),localStorage.setItem("cachedArticles",JSON.stringify(r)),localStorage.setItem("cachedTimestamp",Date.now())}catch(e){setError(e.message)}finally{s(!1)}},c=(e,t,s,r,a)=>{let l="asc"===t.direction?"desc":"asc";s({key:e,direction:l}),a([...r].sort((t,s)=>t[e]<s[e]?"asc"===l?-1:1:t[e]>s[e]?"asc"===l?1:-1:0))}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6518)),_N_E=e.O()}]);